# 系统UI测试报告

> 测试日期: 2026-02-16
> 测试工具: dev-browser (Playwright headless Chromium)
> 测试环境: localhost:5173 (前端) + localhost:8001 (后端API)
> 测试人: Claude Code (自动化测试)

---

## 测试用例列表

### 一、登录模块 (LOGIN)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| L-01 | 登录页面加载 | 访问 /login，页面正常渲染，显示手机号输入框和发送验证码按钮 | ✅ 通过 |
| L-02 | 手机号验证 | 输入不合法手机号（少于11位），发送按钮应禁用 | ✅ 通过 |
| L-03 | 发送验证码 | 输入合法手机号，点击发送，按钮变为可用并发送成功 | ✅ 通过 |
| L-04 | 登录成功 | 输入手机号 + 验证码 123456，自动登录成功跳转到首页 | ✅ 通过 |

### 二、首页模块 (HOME)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| H-01 | 首页加载 | 访问 /，显示欢迎标题、热门问题(8个)、快捷入口(4个)、页脚 | ✅ 通过 |
| H-02 | 开始对话按钮 | 点击"开始对话"按钮，跳转到 /chat | ✅ 通过 |
| H-03 | 热门问题点击 | 点击"录取分数线"卡片，跳转到 /chat?q=... 并自动发送 | ✅ 通过 |

### 三、聊天模块 (CHAT)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| C-01 | 聊天页面加载 | 访问 /chat，页面正常渲染：侧边栏、头部、消息区、输入框 | ✅ 通过 |
| C-02 | 发送消息 | 在输入框输入文字，按 Enter 发送，消息以蓝色气泡显示在右侧 | ✅ 通过 |
| C-03 | AI回复流式输出 | 发送消息后，AI回复以流式方式逐步显示在左侧 | ✅ 通过 |
| C-04 | 思考中占位符 | AI回复前，显示三个跳动圆点 + "我正在思考你的问题" 滚动提示 | ✅ 通过 |
| C-05 | 停止生成按钮 | AI输出过程中，发送按钮变为红色停止按钮，输入框显示"AI正在回复中..." | ✅ 通过 |
| C-06 | 空输入不发送 | 输入框为空时，发送按钮 [disabled]，不可点击 | ✅ 通过 |

### 四、会话管理模块 (CONVERSATION)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| CV-01 | 新建会话 | 点击"新对话"按钮，清空聊天区显示欢迎界面，标题变为"新对话" | ✅ 通过 |
| CV-02 | 懒创建会话 | 新对话发送第一条消息后，会话才出现在侧边栏"今天"分组中 | ✅ 通过 |
| CV-03 | 会话自动命名 | 新会话根据用户第一条消息自动命名（如"你好，请问北师大的录取分数线是..."） | ✅ 通过 |
| CV-04 | 切换会话 | 点击侧边栏中的不同会话，聊天区加载对应消息历史 | ✅ 通过 |
| CV-05 | 删除会话 | 悬停→点击删除→弹出确认对话框"确定要删除对话「重命名测试」吗？"→确认后移除 | ✅ 通过 |
| CV-06 | 重命名会话 | 悬停→点击编辑→出现输入框→输入"重命名测试"→回车保存→标题更新 | ✅ 通过 |
| CV-07 | 置顶会话 | 悬停→点击星标→会话移到"置顶"分组，显示星标图标 | ✅ 通过 |
| CV-08 | 会话分组显示 | 会话按"置顶"、"今天"、"昨天"、"更早"分组显示 | ✅ 通过 |

### 五、头部栏模块 (HEADER)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| HD-01 | Logo显示 | 头部左侧显示蓝色圆形"智"图标 + "京师小智"文字 | ✅ 通过 |
| HD-02 | 会话标题显示 | 头部中间显示当前会话标题，发送消息后自动更新 | ✅ 通过 |
| HD-03 | 标题编辑 | 双击标题进入编辑模式（textbox active），修改后回车保存，侧边栏同步更新 | ✅ 通过 |
| HD-04 | 无用户头像 | 头部右侧无用户头像/下拉菜单（已移到侧边栏设置） | ✅ 通过 |

### 六、侧边栏设置模块 (SIDEBAR)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| S-01 | 用户卡片显示 | 侧边栏底部显示蓝色圆形头像 + "用户5678" 昵称 + 设置齿轮图标 | ✅ 通过 |
| S-02 | 设置下拉菜单 | 点击齿轮图标，弹出下拉菜单含：用户名、暗色模式、字体大小、个人资料、退出登录 | ✅ 通过 |
| S-03 | 主题切换 | 点击"暗色模式"，data-theme 变为 "dark"，页面切换深色背景 | ✅ 通过 |
| S-04 | 字体大小切换 | 选择"大(18px)"，#app zoom 变为 1.125，页面放大且不超出水平视口 | ✅ 通过 |
| S-05 | 退出登录 | 点击"退出登录"，跳转到 /login | ✅ 通过 |
| S-06 | 侧边栏折叠 | 点击折叠按钮，侧边栏收缩为64px图标模式，用户卡片和会话列表隐藏 | ✅ 通过 |
| S-07 | 侧边栏展开 | 折叠状态下点击展开按钮，侧边栏恢复280px完整显示 | ✅ 通过 |

### 七、设置页面模块 (SETTINGS)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| ST-01 | 设置页面加载 | 访问 /settings，显示外观（夜间模式开关、字体大小选择）、账号（手机号、昵称）、关于（版本号） | ✅ 通过 |
| ST-02 | 夜间模式切换 | 设置页夜间模式开关与侧边栏设置同步，切换正常 | ✅ 通过 |
| ST-03 | 字体大小设置 | 设置页字体大小选择（小/标准/大/特大）与侧边栏设置同步 | ✅ 通过 |

### 八、管理员模块 (ADMIN)

| ID | 测试项 | 描述 | 状态 |
|----|--------|------|------|
| A-01 | 管理员登录页 | 访问 /admin/login，显示用户名密码登录表单 + "返回首页"链接 | ✅ 通过 |
| A-02 | 管理员登录 | 使用 admin/admin123 登录，跳转到 /admin/dashboard | ✅ 通过 |
| A-03 | 仪表盘加载 | 显示4个统计卡片（对话数1283、活跃用户456、文档89、待审核7）+ 趋势图 + TOP8热门问题 | ✅ 通过 |
| A-04 | 用户管理页 | /admin/users 显示用户列表表格（手机号、昵称、省份、状态、操作），3条数据 | ✅ 通过 |
| A-05 | 管理员管理页 | /admin/admins 显示管理员列表（admin/系统管理员/超级管理员），含添加管理员按钮 | ✅ 通过 |
| A-06 | 日历管理页 | /admin/calendar 显示4个招生周期（备考期/报名期/录取查询期/常态期）含标签和关键词 | ✅ 通过 |
| A-07 | 模型管理页 | /admin/model 显示负载均衡策略 + 主用模型(deepseek-chat) + 审查模型(qwen-turbo) | ✅ 通过 |

---

## 测试结果汇总

| 模块 | 总计 | 通过 | 失败 | 跳过 |
|------|------|------|------|------|
| 登录 | 4 | 4 | 0 | 0 |
| 首页 | 3 | 3 | 0 | 0 |
| 聊天 | 6 | 6 | 0 | 0 |
| 会话管理 | 8 | 8 | 0 | 0 |
| 头部栏 | 4 | 4 | 0 | 0 |
| 侧边栏设置 | 7 | 7 | 0 | 0 |
| 设置页面 | 3 | 3 | 0 | 0 |
| 管理员 | 7 | 7 | 0 | 0 |
| **合计** | **42** | **42** | **0** | **0** |

---

## 发现的BUG

| ID | 关联测试 | 严重程度 | 描述 | 修复状态 |
|----|----------|----------|------|----------|
| 无 | - | - | 本轮测试未发现新BUG | - |

### 已修复的BUG（本次测试前修复）

| BUG | 修复文件 | 修改内容 |
|-----|----------|----------|
| 字体大小切换导致页面超出屏幕 | `App.vue`, `reset.scss` | 将 CSS zoom 从 `html` 移到 `#app`，并设置反向补偿尺寸 `calc(100vw / var(--font-scale))` |
| 头部用户头像功能分散 | `AppHeader.vue`, `AppSidebar.vue` | 移除头部用户下拉菜单，将主题/字体/退出等功能整合到侧边栏设置齿轮下拉 |

---

## 测试截图清单

| 截图文件 | 对应测试 | 说明 |
|----------|----------|------|
| L01-login-page.png | L-01 | 登录页面完整渲染 |
| L03-send-code.png | L-03 | 发送验证码后绿色提示 |
| H01-home-page.png | H-01 | 首页欢迎界面 |
| H02-start-chat.png | H-02 | 聊天页初始状态 |
| C02-before-send.png | C-02 | 输入消息准备发送 |
| C03-ai-response.png | C-03 | AI流式回复中（含停止按钮） |
| C04-thinking.png | C-04 | 思考中占位符动画 |
| CV01-new-chat.png | CV-01 | 新建会话草稿模式 |
| CV07-pinned.png | CV-07 | 置顶会话分组 |
| CV06-rename-done.png | CV-06 | 会话重命名完成 |
| CV05-confirm-dialog.png | CV-05 | 删除确认对话框 |
| S02-settings-dropdown.png | S-02 | 侧边栏设置下拉菜单 |
| S03-dark-mode.png | S-03 | 暗色主题切换 |
| S04-font-18px.png | S-04 | 字体18px缩放 |
| S06-collapsed.png | S-06 | 侧边栏折叠状态 |
| ST01-settings.png | ST-01 | 设置页面 |
| A02-admin-dashboard.png | A-02/A-03 | 管理员仪表盘 |
| A04-users.png | A-04 | 用户管理页 |
| A05-admins.png | A-05 | 管理员管理页 |
| A06-calendar.png | A-06 | 招生日历页 |
| A07-model.png | A-07 | 模型配置页 |
